(this.webpackJsonpdemo=this.webpackJsonpdemo||[]).push([[0],{29:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var i,o,a,r=n(1),s=n(3),c=n.n(s),u=n(15),l=n.n(u),d=(n(29),n(12)),p=n(23),m=n(16),h=n(17),f=n(7),g=n.n(f),b=n(10),j=(n(42),n(0)),O=n(11),M={onSetup:function(e){var t=e.spliter;return{main:this.getSelected().map((function(e){return e.toGeoJSON()})),spliter:j.n["DRAW_".concat(t)]}},onClick:function(e,t){var n,i,o=this;e.main.length>0?(this.changeMode(e.spliter),this.map.once(j.j.CREATE,(function(t){n=t.features[0],e.main.forEach((function(e,t){if(e.geometry.type!==j.k.LINE_STRING&&e.geometry.type!==j.k.MULTI_LINE_STRING)throw new Error("The feature is not Linestring/MultiLinestring!");var i=Object(O.a)(e,n);i.features.length<1||(i.features.forEach((function(e){var t=o.newFeature(e);o.addFeature(t)})),o.deleteFeature([e.id],{silent:!0}))})),o.deleteFeature([n.id],{silent:!0}),o.exitMode()}))):(e.main=this.getFeature(t.featureTarget.properties.id).toGeoJSON(),this.changeMode(e.spliter),this.map.once(j.j.CREATE,(function(t){if(i=t.features[0],e.main.geometry.type!==j.k.LINE_STRING&&e.main.geometry.type!==j.k.MULTI_LINE_STRING)throw new Error("The feature is not Linestring/MultiLinestring!");var n=Object(O.a)(e.main,i);n.features.length<1||(n.features.forEach((function(e){var t=o.newFeature(e);o.addFeature(t)})),o.deleteFeature([i.id],{silent:!0}),o.deleteFeature([e.main.id],{silent:!0}),o.exitMode())})))},onTap:function(e,t){return this.onClick(e,t)},toDisplayFeatures:function(e,t,n){n(t)},onKeyUp:function(e,t){if(27===t.keyCode)return this.exitMode()},exitMode:function(e,t){return this.changeMode(j.n.SIMPLE_SELECT)}},T=(n(43),function(){function e(t){Object(m.a)(this,e);var n=this;n.draw=t.draw,n.buttons=t.buttons||[],n.onAddOrig=t.draw.onAdd,n.onRemoveOrig=t.draw.onRemove}return Object(h.a)(e,[{key:"onAdd",value:function(e){var t=this;return t.map=e,t.elContainer=t.onAddOrig(e),t.buttons.forEach((function(e){t.addButton(e)})),t.elContainer}},{key:"onRemove",value:function(e){var t=this;t.buttons.forEach((function(e){t.removeButton(e)})),t.onRemoveOrig(e)}},{key:"addButton",value:function(e){var t=document.createElement("button");t.className="mapbox-gl-draw_ctrl-draw-btn",e.classes instanceof Array&&e.classes.forEach((function(e){t.classList.add(e)})),t.addEventListener(e.on,e.action),this.elContainer.appendChild(t),e.elButton=t}},{key:"removeButton",value:function(e){e.elButton.removeEventListener(e.on,e.action),e.elButton.remove()}}]),e}());var v=function(){var e=Object(s.useState)(!1),t=Object(p.a)(e,2),n=t[0],c=t[1],u=Object(s.useRef)(null),l=function(){c(!0)};"unavailable"===g.a.getRTLTextPluginStatus()&&g.a.setRTLTextPlugin("https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js",(function(e){e&&console.error(e)}),!0),Object(s.useEffect)((function(){i=new g.a.Map({container:u.current||"",style:"https://map.ir/vector/styles/main/mapir-xyz-light-style.json",center:[51.3857,35.6102],zoom:10,pitch:0,interactive:!0,hash:!0,attributionControl:!0,customAttribution:"\xa9 Map \xa9 Openstreetmap",transformRequest:function(e){return{url:e,headers:{"x-api-key":"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImp0aSI6ImRiZWU0YWU4OTk4OTA3MmQ3OTFmMjQ4ZDE5N2VhZTgwZWU2NTUyYjhlYjczOWI2NDdlY2YyYzIzNWRiYThiMzIzOTM5MDkzZDM0NTY2MmU3In0.eyJhdWQiOiI5NDMyIiwianRpIjoiZGJlZTRhZTg5OTg5MDcyZDc5MWYyNDhkMTk3ZWFlODBlZTY1NTJiOGViNzM5YjY0N2VjZjJjMjM1ZGJhOGIzMjM5MzkwOTNkMzQ1NjYyZTciLCJpYXQiOjE1OTA4MjU0NzIsIm5iZiI6MTU5MDgyNTQ3MiwiZXhwIjoxNTkzNDE3NDcyLCJzdWIiOiIiLCJzY29wZXMiOlsiYmFzaWMiXX0.M_z4xJlJRuYrh8RFe9UrW89Y_XBzpPth4yk3hlT-goBm8o3x8DGCrSqgskFfmJTUD2wC2qSoVZzQKB67sm-swtD5fkxZO7C0lBCMAU92IYZwCdYehIOtZbP5L1Lfg3C6pxd0r7gQOdzcAZj9TStnKBQPK3jSvzkiHIQhb6I0sViOS_8JceSNs9ZlVelQ3gs77xM2ksWDM6vmqIndzsS-5hUd-9qdRDTLHnhdbS4_UBwNDza47Iqd5vZkBgmQ_oDZ7dVyBuMHiQFg28V6zhtsf3fijP0UhePCj4GM89g3tzYBOmuapVBobbX395FWpnNC3bYg7zDaVHcllSUYDjGc1A","Mapir-SDK":"reactjs"}}}}),o=new b.a({modes:Object(d.a)(Object(d.a)({},b.a.modes),{},{splitLineMode:M}),userProperties:!0}),a=new T({draw:o,buttons:[{on:"click",action:l,classes:["split-icon"]}]}),i.once("load",(function(){i.resize(),i.addControl(a,"top-right"),o.set({type:"FeatureCollection",features:[{id:"example_id",type:"Feature",properties:{},geometry:{type:"LineString",coordinates:[[51.46717071533203,35.752642192392955],[51.41704559326172,35.7715862712587],[51.37207031249999,35.73954585450408],[51.31988525390625,35.753756674845675],[51.29344940185547,35.713904233681035],[51.37035369873047,35.67012719291238],[51.32434844970703,35.633581468816594]]}}]})}))}),[]);var m=function(e){try{var t;null===(t=o)||void 0===t||t.changeMode("splitLineMode",{spliter:e})}catch(n){console.error(n)}};return Object(r.jsxs)("div",{className:"map-wrapper",children:[Object(r.jsx)("div",{id:"map",ref:u}),n?Object(r.jsxs)("div",{className:"mapboxgl-ctrl-group mapboxgl-ctrl split",children:[Object(r.jsx)("button",{className:"mapbox-gl-draw_ctrl-draw-btn mapbox-gl-draw_line",onClick:function(){m("LINE_STRING"),c(!1)}}),Object(r.jsx)("button",{className:"mapbox-gl-draw_ctrl-draw-btn mapbox-gl-draw_point",onClick:function(){m("POINT"),c(!1)}}),Object(r.jsx)("button",{className:"mapbox-gl-draw_ctrl-draw-btn mapbox-gl-draw_polygon",onClick:function(){m("POLYGON"),c(!1)}})]}):null]})},I=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,45)).then((function(t){var n=t.getCLS,i=t.getFID,o=t.getFCP,a=t.getLCP,r=t.getTTFB;n(e),i(e),o(e),a(e),r(e)}))};l.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(v,{})}),document.getElementById("root")),I()}},[[44,1,2]]]);
//# sourceMappingURL=main.1b8ae22e.chunk.js.map