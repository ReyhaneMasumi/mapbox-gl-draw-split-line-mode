(this.webpackJsonpdemo=this.webpackJsonpdemo||[]).push([[0],{35:function(t,e,n){},49:function(t,e,n){},50:function(t,e,n){"use strict";n.r(e);var o,i,a,r=n(4),s=n(6),c=n.n(s),l=n(18),u=n.n(l),d=(n(35),n(10)),p=n(29),m=n(19),g=n(20),b=n(12),f=n.n(b),h=n(8),j=(n(48),n(0)),O=n(28),M=n(26),v=n(27),w=n(1),y={onSetup:function(t){var e=t.spliter,n=this.getSelected().map((function(t){return t.toGeoJSON()}));if(n.length<1)throw new Error("Please select a Linestring/MultiLinestring!");return{main:n,spliter:"passing_mode_".concat(e)}},toDisplayFeatures:function(t,e,n){var o=this;n(e),this.changeMode(t.spliter,(function(e){t.main.forEach((function(t,n){var i=[];Object(v.a)(t).features.forEach((function(t){if(t.geometry.type!==j.k.LINE_STRING&&t.geometry.type!==j.k.MULTI_LINE_STRING)throw new Error("The feature is not Linestring/MultiLinestring!");var n=Object(O.a)(t,e);n.features.length<1?i.push(Object(w.c)([t])):i.push(n)}));var a=Object(w.c)(i.flatMap((function(t){return t.features}))),r=Object(M.a)(a).features[0];r.id=t.id,o._ctx.api.add(r),o.fireUpdate(r)}))}))},fireUpdate:function(t){this.map.fire(j.j.UPDATE,{action:"SplitLine",features:t})}},x=n(13),T=(n(49),function(){function t(e){Object(m.a)(this,t);var n=this;n.draw=e.draw,n.buttons=e.buttons||[],n.onAddOrig=e.draw.onAdd,n.onRemoveOrig=e.draw.onRemove}return Object(g.a)(t,[{key:"onAdd",value:function(t){var e=this;return e.map=t,e.elContainer=e.onAddOrig(t),e.buttons.forEach((function(t){e.addButton(t)})),e.elContainer}},{key:"onRemove",value:function(t){var e=this;e.buttons.forEach((function(t){e.removeButton(t)})),e.onRemoveOrig(t)}},{key:"addButton",value:function(t){var e=document.createElement("button");e.className="mapbox-gl-draw_ctrl-draw-btn",t.classes instanceof Array&&t.classes.forEach((function(t){e.classList.add(t)})),e.addEventListener(t.on,t.action),this.elContainer.appendChild(e),t.elButton=e}},{key:"removeButton",value:function(t){t.elButton.removeEventListener(t.on,t.action),t.elButton.remove()}}]),t}());var I=function(){var t=Object(s.useState)(!1),e=Object(p.a)(t,2),n=e[0],c=e[1],l=Object(s.useRef)(null),u=function(){c(!0)};"unavailable"===f.a.getRTLTextPluginStatus()&&f.a.setRTLTextPlugin("https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js",(function(t){t&&console.error(t)}),!0),Object(s.useEffect)((function(){o=new f.a.Map({container:l.current||"",style:"https://map.ir/vector/styles/main/mapir-xyz-light-style.json",center:[51.3857,35.6102],zoom:10,pitch:0,interactive:!0,hash:!0,attributionControl:!0,customAttribution:"\xa9 Map \xa9 Openstreetmap",transformRequest:function(t){return{url:t,headers:{"x-api-key":"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImp0aSI6ImRiZWU0YWU4OTk4OTA3MmQ3OTFmMjQ4ZDE5N2VhZTgwZWU2NTUyYjhlYjczOWI2NDdlY2YyYzIzNWRiYThiMzIzOTM5MDkzZDM0NTY2MmU3In0.eyJhdWQiOiI5NDMyIiwianRpIjoiZGJlZTRhZTg5OTg5MDcyZDc5MWYyNDhkMTk3ZWFlODBlZTY1NTJiOGViNzM5YjY0N2VjZjJjMjM1ZGJhOGIzMjM5MzkwOTNkMzQ1NjYyZTciLCJpYXQiOjE1OTA4MjU0NzIsIm5iZiI6MTU5MDgyNTQ3MiwiZXhwIjoxNTkzNDE3NDcyLCJzdWIiOiIiLCJzY29wZXMiOlsiYmFzaWMiXX0.M_z4xJlJRuYrh8RFe9UrW89Y_XBzpPth4yk3hlT-goBm8o3x8DGCrSqgskFfmJTUD2wC2qSoVZzQKB67sm-swtD5fkxZO7C0lBCMAU92IYZwCdYehIOtZbP5L1Lfg3C6pxd0r7gQOdzcAZj9TStnKBQPK3jSvzkiHIQhb6I0sViOS_8JceSNs9ZlVelQ3gs77xM2ksWDM6vmqIndzsS-5hUd-9qdRDTLHnhdbS4_UBwNDza47Iqd5vZkBgmQ_oDZ7dVyBuMHiQFg28V6zhtsf3fijP0UhePCj4GM89g3tzYBOmuapVBobbX395FWpnNC3bYg7zDaVHcllSUYDjGc1A","Mapir-SDK":"reactjs"}}}}),i=new h.a({modes:Object(d.a)(Object(d.a)({},h.a.modes),{},{splitLineMode:y,passing_mode_point:Object(x.a)(h.a.modes.draw_point),passing_mode_line_string:Object(x.a)(h.a.modes.draw_line_string),passing_mode_polygon:Object(x.a)(h.a.modes.draw_polygon)}),userProperties:!0}),a=new T({draw:i,buttons:[{on:"click",action:u,classes:["split-icon"]}]}),o.once("load",(function(){o.resize(),o.addControl(a,"top-right"),i.set({type:"FeatureCollection",features:[{id:"example_id",type:"Feature",properties:{},geometry:{type:"LineString",coordinates:[[51.46717071533203,35.752642192392955],[51.41704559326172,35.7715862712587],[51.37207031249999,35.73954585450408],[51.31988525390625,35.753756674845675],[51.29344940185547,35.713904233681035],[51.37035369873047,35.67012719291238],[51.32434844970703,35.633581468816594]]}}]}),o.on("draw.update",(function(t){console.log(t)}))}))}),[]);var m=function(t){try{var e;null===(e=i)||void 0===e||e.changeMode("splitLineMode",{spliter:t})}catch(n){alert(n.message),console.error(n)}};return Object(r.jsxs)("div",{className:"map-wrapper",children:[Object(r.jsx)("div",{id:"map",ref:l}),n?Object(r.jsxs)("div",{className:"mapboxgl-ctrl-group mapboxgl-ctrl split",children:[Object(r.jsx)("button",{className:"mapbox-gl-draw_ctrl-draw-btn mapbox-gl-draw_line",onClick:function(){m("line_string"),c(!1)}}),Object(r.jsx)("button",{className:"mapbox-gl-draw_ctrl-draw-btn mapbox-gl-draw_point",onClick:function(){m("point"),c(!1)}}),Object(r.jsx)("button",{className:"mapbox-gl-draw_ctrl-draw-btn mapbox-gl-draw_polygon",onClick:function(){m("polygon"),c(!1)}})]}):null]})},N=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,51)).then((function(e){var n=e.getCLS,o=e.getFID,i=e.getFCP,a=e.getLCP,r=e.getTTFB;n(t),o(t),i(t),a(t),r(t)}))};u.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(I,{})}),document.getElementById("root")),N()}},[[50,1,2]]]);
//# sourceMappingURL=main.d07f3f3e.chunk.js.map